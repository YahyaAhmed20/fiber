{% extends 'base.html' %}
{% load static %}

{% block body %}
<div class="container py-5 mt-5 text-center">
  <h2 class="display-5 fw-bold mb-4">🛠 Our Projects</h2>
</div>

<div class="container pb-5">
  <div class="row g-4">
    {% for project in projects %}
      <div class="col-md-4 col-sm-6">
        <div class="card border-0 shadow-sm h-100 text-center">

          <!-- 👇 لو عند المشروع صور، نعرض أول صورة كـ thumbnail -->
          {% if project.images.first %}
            <a href="{% url 'ourproject:project_detail' project.pk %}">
              <img src="{{ project.images.first.image.url }}" class="card-img-top uniform-img" alt="{{ project.title }}">
            </a>
          {% else %}
            <!-- صورة افتراضية لو مفيش صور -->
            <a href="{% url 'ourproject:project_detail' project.pk %}">
              <img src="{% static 'img/no-image.jpg' %}" class="card-img-top uniform-img" alt="No image">
            </a>
          {% endif %}

          <div class="card-body">
            <h5 class="card-title">{{ project.title }}</h5>
            <p class="card-text">{{ project.description|truncatewords:20 }}</p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<style>
  .uniform-img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
  }

  @media (max-width: 576px) {
    .uniform-img {
      height: 180px;
    }
  }
</style>
{% endblock body %}
